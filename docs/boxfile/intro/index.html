<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta content='width=device-width, initial-scale=1.0' name='viewport'>
    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
    <!-- Use title if it's in the page YAML frontmatter -->
    <title>
      Boxfile - Nanobox Documentation
    </title>
    <link href='http://fonts.googleapis.com/css?family=Lato:300,400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href="/stylesheets/all-09a6dc97.css" rel="stylesheet" type="text/css" />
    <script src="/javascripts/all-e3f637d0.js" type="text/javascript"></script>
  </head>
  <body>
    <div id='header'>
      <a class='left' href='/' id='logo'>
        <svg id='nanobox-logo' preserveaspectratio='xMinYMin meet' space='preserve' version='1.1' viewBox='0 0 35 35' xmlns='http://www.w3.org/2000/svg'>
          <g xmlns='http://www.w3.org/2000/svg'>
            <polygon class='st155' points='16.823,31.026 29.647,24.417 29.647,26.343 16.823,32.954  '></polygon>
            <polygon class='st93' points='16.823,31.026 4,24.417 4,26.343 16.823,32.954   '></polygon>
            <polygon class='st155' points='16.823,26.425 29.647,19.814 29.647,21.741 16.823,28.353  '></polygon>
            <polygon class='st93' points='16.823,26.425 4,19.814 4,21.741 16.823,28.353   '></polygon>
            <polygon class='st155' points='16.823,21.822 29.647,15.213 29.647,17.14 16.823,23.751   '></polygon>
            <polygon class='st93' points='16.823,21.822 4,15.213 4,17.14 16.823,23.751  '></polygon>
            <polygon class='st53' points='29.647,10.61 16.823,17.22 4,10.61 16.823,4  '></polygon>
            <polygon class='st155' points='16.823,17.22 29.647,10.61 29.647,12.538 16.823,19.149  '></polygon>
            <polygon class='st93' points='16.823,17.22 4,10.61 4,12.538 16.823,19.149   '></polygon>
          </g>
        </svg>
        <span>Nanobox Docs</span>
      </a>
      <a class='right' href='http://nanobox.io'>
        <svg enable-background='new 0 0 18 18' id='home-icon' space='preserve' version='1.1' viewbox='0 0 18 18' x='0px' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' y='0px'>
          <polygon fill='none' points='11,13 11,9 9,7 7,9 &#x000A;	7,13 ' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2'></polygon>
          <polyline fill='none' points='14,11 14,16 4,16 &#x000A;	4,11 ' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2'></polyline>
          <polyline fill='none' points='2,9.1 9.1,2 &#x000A;	16.1,9.1 ' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2'></polyline>
        </svg>
      </a>
    </div>
    <div id='wrapper'>
      <div class='open' id='contents-btn'>Contents</div>
      <div id='navigation'>
        <ul class='closed' id='contents'>
          <li>
            <a href="/">Overview</a>
          </li>
          <li>
            <a href="/why-nanobox/">Why Nanobox?</a>
          </li>
          <li>
            <a href="/installation/installing-nanobox/">Installation</a>
            <ul class='sub'>
              <li>
                <a href="/installation/upgrading/">Upgrading</a>
              </li>
              <li>
                <a href="/installation/uninstalling/">Uninstalling</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="/getting-started/intro/">Getting Started</a>
            <ul class='sub'>
              <li>
                <a href="/getting-started/project-setup/">Project Setup</a>
              </li>
              <li>
                <a href="/getting-started/nanofile/">.nanofile</a>
              </li>
              <li>
                <a href="/getting-started/boxfile/">Boxfile</a>
              </li>
              <li>
                <a href="/getting-started/engines/">Engines</a>
              </li>
              <li>
                <a href="/getting-started/services/">Services</a>
              </li>
              <li>
                <a href="/getting-started/logs/">Logs</a>
              </li>
              <li>
                <a href="/getting-started/deploys/">Deploys</a>
              </li>
              <li>
                <a href="/getting-started/tunneling/">Tunneling</a>
              </li>
              <li>
                <a href="/getting-started/network-storage/">Network Storage</a>
              </li>
              <li>
                <a href="/getting-started/workflow/">Workflow</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="/cli/intro/">Command Line Interface</a>
            <ul class='sub'>
              <li>
                <a href="/cli/bootstrap/">bootstrap</a>
              </li>
              <li>
                <a href="/cli/build/">build</a>
              </li>
              <li>
                <a href="/cli/console/">console</a>
              </li>
              <li>
                <a href="/cli/create/">create</a>
              </li>
              <li>
                <a href="/cli/deploy/">deploy</a>
              </li>
              <li>
                <a href="/cli/destroy/">destroy</a>
              </li>
              <li>
                <a href="/cli/exec/">exec</a>
              </li>
              <li>
                <a href="/cli/fetch/">fetch</a>
              </li>
              <li>
                <a href="/cli/halt/">halt</a>
              </li>
              <li>
                <a href="/cli/help/">help</a>
              </li>
              <li>
                <a href="/cli/init/">init</a>
              </li>
              <li>
                <a href="/cli/log/">log</a>
              </li>
              <li>
                <a href="/cli/new/">new</a>
              </li>
              <li>
                <a href="/cli/publish/">publish</a>
              </li>
              <li>
                <a href="/cli/reload/">reload</a>
              </li>
              <li>
                <a href="/cli/resume/">resume</a>
              </li>
              <li>
                <a href="/cli/status/">status</a>
              </li>
              <li>
                <a href="/cli/suspend/">suspend</a>
              </li>
              <li>
                <a href="/cli/tunnel/">tunnel</a>
              </li>
              <li>
                <a href="/cli/up/">up</a>
              </li>
              <li>
                <a href="/cli/update/">update</a>
              </li>
              <li>
                <a href="/cli/upgrade/">upgrade</a>
              </li>
              <li>
                <a href="/cli/watch/">watch</a>
              </li>
            </ul>
          </li>
          <li class='active'>
            <a href="/boxfile/intro/">Boxfile</a>
            <ul class='sub'>
              <li>
                <a href="/boxfile/env/">env</a>
              </li>
              <li>
                <a href="/boxfile/build/">build</a>
              </li>
              <li>
                <a href="/boxfile/code-services/">Code Services</a>
              </li>
              <li>
                <a href="/boxfile/data-services/">Data Services</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="/engines/intro/">Engines</a>
            <ul class='sub'>
              <li>
                <a href="/engines/how-engines-work/">How Engines Work</a>
              </li>
              <li>
                <a href="/engines/boxfile-spec/">Boxfile Specification</a>
              </li>
              <li>
                <a href="/engines/project-creation/">Project Creation</a>
              </li>
              <li>
                <a href="/engines/enginefile/">Enginefile</a>
              </li>
              <li>
                <a href="/engines/style-guide/">Style Guide</a>
              </li>
              <li>
                <a href="/engines/scripts/intro/">Scripts</a>
                <ul class='sub'>
                  <li>
                    <a href="/engines/scripts/sniff/">sniff</a>
                  </li>
                  <li>
                    <a href="/engines/scripts/prepare/">prepare</a>
                  </li>
                  <li>
                    <a href="/engines/scripts/boxfile/">boxfile</a>
                  </li>
                  <li>
                    <a href="/engines/scripts/build/">build</a>
                  </li>
                  <li>
                    <a href="/engines/scripts/cleanup/">cleanup</a>
                  </li>
                </ul>
              </li>
              <li>
                <a href="/engines/common-tasks/intro/">Common Tasks</a>
                <ul class='sub'>
                  <li>
                    <a href="/engines/common-tasks/installing-binaries/">Installing Binaries</a>
                  </li>
                  <li>
                    <a href="/engines/common-tasks/generating-output/">Generating Output</a>
                  </li>
                  <li>
                    <a href="/engines/common-tasks/working-with-input/">Working with Input</a>
                  </li>
                  <li>
                    <a href="/engines/common-tasks/validation/">Validation</a>
                  </li>
                  <li>
                    <a href="/engines/common-tasks/caching/">Caching</a>
                  </li>
                  <li>
                    <a href="/engines/common-tasks/environment-variables/">Environment Variables</a>
                  </li>
                  <li>
                    <a href="/engines/common-tasks/template-generation/">Template Generation</a>
                  </li>
                  <li>
                    <a href="/engines/common-tasks/application-config/">Application Configuration</a>
                  </li>
                </ul>
              </li>
              <li>
                <a href="/engines/publish/">Publish</a>
              </li>
              <li>
                <a href="/engines/dev-workflow/">Development Workflow</a>
              </li>
              <li>
                <a href="/engines/debugging/">Debugging</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="/other/intro/">Other</a>
          </li>
        </ul>
      </div>
      <div id='content'>
        <h1>Boxfile</h1>
        <p>The Boxfile is yaml config file housed in the root of your project&#39;s repo that defines all configuration related to your app’s deployment and infrastructure. It allows you to custom-configure your app&#39;s environment to your project&#39;s specific needs.</p>
        
        <h4 id="important-things-to-know-about-the-boxfile">Important Things to Know About the Boxfile</h4>
        
        <ul>
        <li>Your Boxfile must be named &quot;Boxfile&quot; (capital B and no file extension) in order to be recognized.</li>
        <li>The Boxfile must be placed at the root of your project&#39;s repo.</li>
        <li>The Boxfile must be valid yaml markup. You can brush up on your yaml at <a href="http://yaml.org/start.html">yaml.org</a> or check your syntax at <a href="http://www.yamllint.com/">yamllint.com</a>.</li>
        <li>Boxfiles are not required. If not included in your project, Nanobox will attempt to auto-detect the needs of your app.</li>
        <li>Build config options available in the Boxfile are defined by the <a href="/engines/intro/">engine</a> you&#39;re using.</li>
        </ul>
        
        <h4 id="sample-boxfile">Sample Boxfile</h4>
        <pre class="highlight yaml"><code><span class="s">env</span><span class="pi">:</span>&#x000A;  <span class="s">ENVIRONMENT</span><span class="pi">:</span> <span class="s">production</span>&#x000A;&#x000A;<span class="s">build</span><span class="pi">:</span>&#x000A;  <span class="s">engine</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ruby"</span>&#x000A;  <span class="s">lib_dir</span><span class="pi">:</span> <span class="s">vendor</span>&#x000A;  <span class="s">reuse_libs</span><span class="pi">:</span> <span class="s">true</span>&#x000A;&#x000A;<span class="s">web1</span><span class="pi">:</span>&#x000A;  <span class="s">name</span><span class="pi">:</span> <span class="s">site</span>&#x000A;  <span class="s">network_dirs</span><span class="pi">:</span>&#x000A;    <span class="s">storage1</span><span class="pi">:</span>&#x000A;      <span class="pi">-</span> <span class="s">usr/uploads</span>&#x000A;&#x000A;<span class="s">worker1</span><span class="pi">:</span>&#x000A;  <span class="s">name</span><span class="pi">:</span> <span class="s">image_processor</span>&#x000A;  <span class="s">exec</span><span class="pi">:</span> <span class="s1">'</span><span class="s">ruby</span><span class="nv"> </span><span class="s">workers/image_processor.rb'</span>&#x000A;&#x000A;<span class="s">postgresql1</span><span class="pi">:</span>&#x000A;  <span class="s">name</span><span class="pi">:</span> <span class="s">app-db</span>&#x000A;&#x000A;<span class="s">nfs1</span><span class="pi">:</span>&#x000A;  <span class="s">name</span><span class="pi">:</span> <span class="s">app-storage</span>&#x000A;&#x000A;<span class="s">redis1</span><span class="pi">:</span>&#x000A;  <span class="s">name</span><span class="pi">:</span> <span class="s">queue-and-sessions</span>  &#x000A;</code></pre>
        
        <h2 id="the-boxfile-structure">The Boxfile Structure</h2>
        
        <p>Your app is made up of services. Simply put, a service is a piece of your app&#39;s infrastructure tasked with a specific function. Each service is configured separately in the Boxfile.</p>
        
        <p>Every service in your app has a service id. For example: web1, web2, mysql1, postgresql1, nfs1, redis1, worker1, etc. Service IDs consist of the service type and a number (web1, web2, postgresql1, mongodb2, ect.). <strong>Service IDs are not arbitrary</strong>. They define the type of the service and tie service-specific configs to actual running instances.</p>
        
        <p>All configuration is unique to a service ID. Anything specified under a service ID will only apply to that specific service. For example, configs defined in web1 will not apply to web2. </p>
        
        <h4 id="boxfile-structure">Boxfile Structure</h4>
        <pre class="highlight yaml"><code><span class="s">web1</span><span class="pi">:</span> <span class="c1">#&lt;---------------------- Service ID</span>&#x000A;  <span class="s">name</span><span class="pi">:</span> <span class="s">site</span>              <span class="c1">#|</span>&#x000A;  <span class="s">network-dirs</span><span class="pi">:</span>           <span class="c1">#|-- Service Settings</span>&#x000A;    <span class="pi">-</span> <span class="s">usr/uploads</span>         <span class="c1">#|</span>&#x000A;&#x000A;&#x000A;<span class="s">postgresql1</span><span class="pi">:</span> <span class="c1">#&lt;--------------- Service ID</span>&#x000A;  <span class="s">name</span><span class="pi">:</span> <span class="s">site-db</span>           <span class="c1">#|</span>&#x000A;  <span class="s">version</span><span class="pi">:</span> <span class="s">9.4</span>            <span class="c1">#|-- Service Settings</span>&#x000A;                          <span class="c1">#|</span>&#x000A;</code></pre>
        
        <h4 id="things-to-note-about-yaml">Things to Note About yaml</h4>
        
        <ul>
        <li><strong>Yaml is very picky about indentation</strong>. Indentation is what is used to define the relationship structure of information in your Boxfile.</li>
        <li><strong>Tabs are not valid yaml</strong>. All indendation should be done using double spaces.</li>
        </ul>
        
        <h2 id="the-boxfile-can-be-used-as-an-infrastructure-quot-seed-quot-file">The Boxfile Can Be Used as an Infrastructure &quot;Seed&quot; File</h2>
        
        <p>In many ways, the Boxfile acts as a &quot;seed&quot; file for your infrastructure. It gives you the ability to launch services and add things like environment variables and cron jobs on deploy, simply by including them in the Boxfile. On each deploy, all services and settings defined in the your Boxfile are checked against those already existing in your app. If a service or setting in your Boxfile does not already exist, it will automatically be created.</p>
        
        <h2 id="sections-of-the-boxfile">Sections of the Boxfile</h2>
        
        <p>Boxfiles consist of a handful of sections or &quot;nodes&quot;: env, build, code services (webs &amp; workers), and data services (mysql, postgresql, redis, etc). These are covered in detail in the next few docs, but here are some quick descriptions:</p>
        
        <p><a href="/boxfile/env/"><code>env</code></a> - Defines environment variables for your application.  </p>
        
        <p><a href="/boxfile/build/"><code>build</code></a> - Defines the build environment for the app and what commands should run to prep the code for deploy.  </p>
        
        <p><a href="/boxfile/code-services/"><code>web#, worker#</code></a> - Defines settings unique to each code service.  </p>
        
        <p><a href="/boxfile/data-services/"><code>postgresql#</code>, <code>redis#</code>, etc.</a> - Defines settings unique to a specific data service.  </p>
        <div id='pagination'>
          <a class="prev" href="/cli/watch/">watch</a>
          <a class="next" href="/boxfile/env/">env</a>
        </div>
      </div>
    </div>
    <div id='footer'></div>
  </body>
</html>
